(()=>{"use strict";const e=window.wp.blocks,o=JSON.parse('{"UU":"snow-monkey-forms/control-date","uK":{"xV":{"A":"{\\"date\\":true}"}}}'),n=window.ReactJSXRuntime,s=window.wp.blockEditor,t=window.wp.components,a=window.wp.compose,i=window.wp.element,r=window.wp.i18n,l=({value:e,onChange:o})=>{const s={};return""===e&&(s.borderColor="#d94f4f"),(0,n.jsx)(t.TextControl,{label:(0,r.__)("name","snow-monkey-forms"),help:(0,r.__)("Required. Input a unique machine-readable name.","snow-monkey-forms"),value:e,onChange:o,required:!0,style:s})},d=({value:e,onChange:o,multiple:s=!1})=>{const a=s?t.TextareaControl:t.TextControl;return(0,n.jsx)(a,{label:(0,r.__)("value","snow-monkey-forms"),help:(0,r.__)("Optional. Initial value.","snow-monkey-forms"),value:e,onChange:o})},c=({value:e,onChange:o})=>(0,n.jsx)(t.TextControl,{label:(0,r.__)("id","snow-monkey-forms"),value:e,onChange:o}),m=({value:e,onChange:o})=>(0,n.jsx)(t.TextControl,{label:(0,r.__)("class","snow-monkey-forms"),help:(0,r.__)("Separate multiple classes with spaces.","snow-monkey-forms"),value:e,onChange:o});window.lodash;const h=(0,a.createHigherOrderComponent)((e=>o=>{const{attributes:a,setAttributes:i}=o,{validations:l}=a;if(void 0===l)return(0,n.jsx)(e,{...o});const d=JSON.parse(l);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.InspectorControls,{children:(0,n.jsx)(t.PanelBody,{title:(0,r.__)("Validation","snow-monkey-forms"),children:(0,n.jsx)(t.ToggleControl,{label:(0,r.__)("Required","snow-monkey-forms"),checked:!!d.required,onChange:e=>{i({validations:JSON.stringify({...d,required:e})})}})})}),(0,n.jsx)(e,{...o})]})}),"withValidations"),u=(0,a.compose)(h)((({attributes:e,setAttributes:a})=>{const{name:h,value:u,min:x,max:w,id:p,controlClass:v,description:f,isDisplayDescriptionConfirm:g,validations:j}=e;(0,i.useEffect)((()=>{a({validations:JSON.stringify({...JSON.parse(o.uK.xV.A),...JSON.parse(j)})})}),[]),(0,i.useEffect)((()=>{""===h&&a({name:`date-${((new Date).getTime()+Math.floor(8999*Math.random()+1e3)).toString(32)}`})}),[h]);const y=(0,s.useBlockProps)({className:"smf-placeholder"});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.InspectorControls,{children:[(0,n.jsxs)(t.PanelBody,{title:(0,r.__)("Attributes","snow-monkey-forms"),children:[(0,n.jsx)(l,{value:h,onChange:e=>a({name:e})}),(0,n.jsx)(d,{value:u,onChange:e=>a({value:e})}),(0,n.jsx)(t.TextControl,{label:(0,r.__)("Minimum date","snow-monkey-forms"),type:"date",value:x,onChange:e=>a({min:e})}),(0,n.jsx)(t.TextControl,{label:(0,r.__)("Maximum date","snow-monkey-forms"),type:"date",value:w,onChange:e=>a({max:e})}),(0,n.jsx)(c,{value:p,onChange:e=>a({id:e})}),(0,n.jsx)(m,{value:v,onChange:e=>a({controlClass:e})})]}),(0,n.jsxs)(t.PanelBody,{title:(0,r.__)("Block settings","snow-monkey-forms"),children:[(0,n.jsx)(t.TextControl,{label:(0,r.__)("Description","snow-monkey-forms"),value:f,onChange:e=>a({description:e})}),(0,n.jsx)(t.ToggleControl,{label:(0,r.__)("Description is also displayed on the confirmation screen","snow-monkey-forms"),checked:g,onChange:e=>{a({isDisplayDescriptionConfirm:e})}})]})]}),(0,n.jsxs)("div",{...y,"data-name":h,children:[(0,n.jsx)("div",{className:"smf-text-control",children:(0,n.jsx)("input",{type:"date",name:h,value:u,min:x||void 0,max:w||void 0,disabled:"disabled",id:p||void 0,pattern:"\\d{4}-\\d{2}-\\d{2}",className:`smf-text-control__control ${v}`,"data-validations":Object.keys(Object.fromEntries(Object.entries(JSON.parse(j)).filter((([,e])=>!!e)))).join(" ")||void 0})}),f&&(0,n.jsx)("div",{className:"smf-control-description",children:f})]})]})}));(0,e.registerBlockType)(o.UU,{icon:{src:function(){return(0,n.jsxs)("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",style:{color:"#cd162c"},children:[(0,n.jsx)("path",{clipRule:"evenodd",d:"m22 7.5h-20c-.27614 0-.5.22386-.5.5v8c0 .2761.22386.5.5.5h20c.2761 0 .5-.2239.5-.5v-8c0-.27614-.2239-.5-.5-.5zm-20-1.5c-1.104569 0-2 .89543-2 2v8c0 1.1046.89543 2 2 2h20c1.1046 0 2-.8954 2-2v-8c0-1.10457-.8954-2-2-2z",fillRule:"evenodd"}),(0,n.jsx)("rect",{x:"9.25",y:"9.25",width:"1",height:"5",transform:"rotate(30 9.25 9.25)"}),(0,n.jsx)("rect",{x:"16.75",y:"9.25",width:"1",height:"5",transform:"rotate(30 16.75 9.25)"}),(0,n.jsx)("rect",{x:"3",y:"11.25",width:"3",height:"1.5"}),(0,n.jsx)("rect",{x:"10.5",y:"11.25",width:"3",height:"1.5"}),(0,n.jsx)("rect",{x:"18",y:"11.25",width:"3",height:"1.5"})]})}},edit:u,save:()=>null})})();